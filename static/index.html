<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="shortcut icon" type="image/png" href="img/favicon.png" />
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
    <title>Questions pour un champion</title>
    <style>
        #main-container {
            display: none;
        }
    </style>
</head>

<body>
    <div id="container" class="container">
        <div class="m-t-30">
            <h1>Questions pour un Champion</h1>
        </div>
        <div id="player-name-form-row" class="player-name-form-row">
            <div class="player-name-form row">
                <label for="name" class="col-4 offset-2">Nom</label>
                <div class="form-group col-4 ">
                    <input type="text" id="playerName" placeholder="Saisir un nom de joueur"
                        class="form-control ">
                </div>

                <div class="col-12 text-center">
                    <button id="btnPlay" class="btn btn-outline-info">C'est parti</button>
                </div>
            </div>
        </div>
        <div id="main-container" class="row main-container">
            <div class="blocQuestion">
                <h2 id="questionTitle" class="text-center">En attente d'une question</h2>
            </div>
            <div class="row blocAnswers">

                <div id="answersList">Merci d'attendre un instant, le maître de jeu séléctionne une question</div>
                <div class="col-12 m-t-30 text-center">
                    <button class="btn btn-outline-info">Soumettre ma réponse</button>
                </div>
            </div>

        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
    <script src="main.js"></script>
    <script>
        var socketplay = io("/play", { transports: ['websocket'], upgrade: false });

        var questionTitle = document.getElementById('questionTitle');
        var answersList = document.getElementById('answersList');

        socketplay.emit('joinGame', Date.now())
        socketplay.on('selectExistingQuestion', data => {
            var answers_str = "";
            questionTitle.innerHTML = data.title;
            var answers = data.answers;
            console.log(data.title);

            for (var i = 0; i < answers.length; i++) {

                answers_str += "<div class='col-6 form-check'><input class='form-check-input' type='radio' name='name' id='" + answers[i]._id + "'> <label class='form-check-label' for='" + answers[i]._id + "'>" + answers[i].title + "</label></div>";
            } answers
            answersList.innerHTML = answers_str;
        })

        socketplay.on('sendAnswer', data => {

        })

    </script>
</body>

</html>